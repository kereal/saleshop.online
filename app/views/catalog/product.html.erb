<%= render "catalog/breadcrumbs", to: @product.category %>

<div class="product">

  <div class="row">
    
    <div class="col-sm-4">
      <div class="images">

        <% unless @product.images.blank? %>
          <div class="big">
            <%= image_tag(@product.image(:original), alt: @product.title, data: { zoom_image: @product.image(:original) }) %>
          </div>
          <div class="thumbs" id="product-gallery">
            <% @product.images.each_with_index do |image, index| %>
              <%= link_to image_tag(image.image(:thumb), alt: nil), image.image(:original), data: { image: image.image(:original), zoom_image: image.image(:original) }, class: ("zoomGalleryActive" if index==0) %>
            <% end %>
          </div>
        <% else %>
          <%= image_tag "http://placehold.it/400x508/fff/777?text=нет+фото", alt: nil, style: "border: 1px solid #eee;" %>
        <% end %>

      </div>
    </div>
    
    <div class="col-sm-8">
      <h1><%= @product.title %></h1>
      <h4 class="article">Артикул: <%= @product.article %></h4>
      <% if @product.brand.try(:image).try(:exists?) %>
        <div class="brand">
          <%= link_to image_tag(@product.brand.image(:medium)), @product.brand %>
        </div>
      <% end %>
      <div class="price">
        <%= number_to_currency @product.discount_price %>
        <% if @product.discount %><s><%= number_to_currency @product.price %></s><% end %>
      </div>
      <% if @product.properties %>
        <div class="properties">
          <% JSON.parse(@product.properties).each do |prop| %>
            <div class="property"><%= "#{prop.keys[0]}: #{prop.values[0]}" %></div>
          <% end %>
        </div>
      <% end %>
      <div class="tocart">
        <%= link_to cart_add_path(@product.id) do %>
          <button>В корзину</button>
        <% end %>
      </div>
      <div class="description">
        <%= raw @product.description %>
      </div>
    </div>
  
  </div>

</div>


<style>

  .product .images {
    margin-top: 12px;
    }
    .product .images img {
      width: 100%
      }
    .product .images > .thumbs {
      margin-top: 12px;
      }
      .product .images > .thumbs > a {
        display: inline-block;
        border: 2px solid #ccc;
        position: relative;
        width: 70px;
        height: 70px;
        margin-right: 10px;
        overflow: hidden;
        }
      .product .images > .thumbs > a.zoomGalleryActive {
        border-color: #ad1d22;
        }
        .product .images > .thumbs > a > img {
          position: absolute;
          left: 50%;
          top: 50%;
          height: 100%;
          width: auto;
          -webkit-transform: translate(-50%,-50%);
              -ms-transform: translate(-50%,-50%);
                  transform: translate(-50%,-50%);
          }
  .product .article {
    font-weight: normal;
    font-size: 14px;
    color: #666;
    margin-top: -.8em;
    margin-bottom: 1.4em;
    }
  .product .brand {
    width: 20%;
    }
    .product .brand img {
      width: 100%;
      }
  .product .price {
    font-size: 24px;
    margin: 10px 0;
    font-weight: bold;
    color: #ad1d22;
    }
    .product .price > s {
      font-weight: normal;
      font-size: 16px;
      color: #666;
      }
  .product .properties {
    font-size: 15px;
    margin-bottom: 16px;
    }
    .product .properties > .property {
      }
  .product .tocart {
    margin-bottom: 22px;
    }
    .product .tocart button {
      background: #b10000;
      color: #fff;
      border: 0;
      padding: 12px 29px;
      outline: none;
      }
</style>
