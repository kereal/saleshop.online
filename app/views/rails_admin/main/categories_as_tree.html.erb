<%
  def categories_tree_for(categories)
    categories.map do |category, nested_categories|
      render("as_tree_item", category: category) + (nested_categories.size > 0 ? content_tag(:ul, categories_tree_for(nested_categories), class: "sub") : nil)
    end.join.html_safe
  end
%>


<ul class="categories-tree">
  <%= categories_tree_for Category.hash_tree %>
</ul>


<style>
  
  .categories-tree {
    font-size: 1.1em;
    line-height: 1.6
    }

</style>